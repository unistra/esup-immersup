function init_datatable(){dt=$("#slots_list").DataTable({processing:!1,order:[[4,"asc"]],pageLength:15,lengthMenu:[[5,10,25,-1],[5,10,25,all_text]],serverSide:!1,responsive:!1,ajax:{url:"/api/slots",data:function(t){return t.past=$("#filter_past_slots").is(":checked"),t.visits=!1,t.events=!1,t},dataSrc:function(t){if(void 0!==t.data)return t.data}},searching:!0,language:{url:language_file},columns:[{data:"published",render:function(t){return t?yes_text:no_text}},{data:"managed_by",render:function(t,e,a){let l="";return a.establishment?(l+=a.establishment.code,a.structure&&(l+=" - "+a.structure.code)):a.highschool&&(l=a.highschool.city+" - "+a.highschool.label),l}},{data:"training_label"},{data:"course",render:function(t,e,a){return t.label}},{data:"datetime",render:function(t,e,a){return"display"===e||"filter"===e?"<span>"+a.date+"</span><br><span>"+a.time.start+" - "+a.time.end+"</span>":t}},{data:"location",render:function(t,e,a){let l="<span>";return t.campus&&(l+=t.campus+"</span><br><span>"),t.building&&(l+=t.building+"</span><br><span>"),l+a.room+"</span>"}},{data:"speakers",render:function(t){let e="";return $.each(t,function(t,a){e+="<a href='mailto:"+a+"'>"+t+"</a><br>"}),e}},{data:"",render:function(t,e,a){let l=a.n_register,r=a.n_places;return element="<span>"+l+"/"+r+'</span><div class="progress">    <div       class="progress-bar"       role="progressbar"       aria-valuenow="'+l+'"       aria-valuemin="0"       aria-valuemax="'+r+'"       style="width: '+Math.round(l/r*100)+'%"></div></div>',element}},{data:"attendances_status",render:function(t,e,a){let l="",r=0;return 1===a.attendances_value&&(a.can_update_course_slot||a.can_update_attendances)?(r=1,l='<button class="btn btn-light btn-sm mr-4" name="edit" onclick="open_modal('+a.id+","+r+","+a.n_places+","+a.is_past+","+a.can_update_registrations+","+a.face_to_face+')" title="'+attendances_text+"\"><i class='fa fas fa-edit fa-2x'></i></button>"):-1!==a.attendances_value&&(l='<button class="btn btn-light btn-sm mr-4" name="view" onclick="open_modal('+a.id+","+r+","+a.n_places+')" title="'+registered_text+"\"><i class='fa fas fa-eye fa-2x'></i></button>"),l+t}},{data:"additional_information",render:function(t){return t?'<span data-toggle="tooltip" title="'+t+'"><i class="fa fas fa-info-circle fa-2x"></i></span>':""}},{data:"restrictions",render:function(t){let e="<div>";return!0===t.establishment_restrictions&&(e+=establishments_txt+" :<br>",t.allowed_establishments.forEach(t=>{e+="- "+t+"<br>"}),t.allowed_highschools.forEach(t=>{e+="- "+t+"<br>"})),!0===t.levels_restrictions&&(e&&(e+="<br>"),e+=levels_txt+" :<br>",t.allowed_highschool_levels.forEach(t=>{e+="- "+t+"<br>"}),t.allowed_post_bachelor_levels.forEach(t=>{e+="- "+t+"<br>"}),t.allowed_student_levels.forEach(t=>{e+="- "+t+"<br>"})),e+="</div>","<div></div>"!==e?'<span data-toggle="tooltip" data-html="true" data-title="'+e+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>':""}}],columnDefs:[{defaultContent:"-",targets:"_all"},{orderable:!1,targets:9}]}),$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)}),$("#filter_past_slots").click(function(){dt.ajax.reload()}),dt.on("draw",function(){$('[data-toggle="tooltip"]').tooltip()}),yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1},{column_number:1,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"structure_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1},{column_number:2,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"training_filter",filter_reset_button_text:!1},{column_number:3,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"label_filter",filter_reset_button_text:!1},{column_number:6,filter_type:"text",filter_default_label:"",style_class:"form-control form-control-sm",filter_container_id:"speaker_filter",filter_reset_button_text:!1},{column_number:8,filter_default_label:"",style_class:"form-control form-control-sm",filter_container_id:"attendances_filter",filter_reset_button_text:!1}])}