function init_column_defs(){let t=[{defaultContent:"",targets:"_all",className:"all"},{orderable:!1,targets:8}];return t}function init_yadcf_filter(){let t=[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1},{column_number:1,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"managed_by_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1},{column_number:7,filter_default_label:"",style_class:"form-control form-control-sm",filter_container_id:"attendances_filter",filter_reset_button_text:!1},{column_number:10,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"groups_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1}];return t}function init_datatable(){dt=$("#slots_list").DataTable({processing:!1,order:[[3,"asc"]],pageLength:15,lengthMenu:[[5,10,25,-1],[5,10,25,all_text]],serverSide:!1,responsive:!1,ajax:{url:"/core/utils/slots",data:function(t){return t.past=$("#filter_past_slots").is(":checked"),t.events=!0,t.user_slots=!0,t},dataSrc:function(t){if(void 0!==t.data)return t.data}},searching:!0,language:{url:language_file},columns:[{data:"published",render:function(t){return t?yes_text:no_text}},{data:"establishment_code",render:function(t,e,a){let n="";return is_set(t)?(n+=t,n+=is_set(a.structure_code)?` - ${a.structure_code}`:""):is_set(a.highschool_label)&&(n=`${a.highschool_city} - ${a.highschool_label}`),n}},{data:"event_label",render:function(t,e,a){let n=`${t} (${a.event_type_label}) `;return"filter"===e?n.normalize("NFD").replace(/\p{Diacritic}/gu,""):(n+=`<span style="padding-left:5px" data-toggle="tooltip" title="${a.event_description}">\n                    <i class="fa fas fa-info-circle fa-2x centered-icon"></i>\n                  </span>`,n)}},{data:"date",render:function(t,e,a){return display_slot_date(t,e,a)}},{data:"campus_label",render:function(t,e,a){let n="",r=t,l=a.building_label,i=0,o=1,s=2;return"filter"===e?(a.place===i?n=`${r} ${l} ${a.room}`:a.place===o?n=remote_event_text:a.place===s&&(n=a.room),n.normalize("NFD").replace(/\p{Diacritic}/gu,"")):a.place===i?(n="<span>",n+=is_set(r)?`${r} </span><br><span>`:"",n+=is_set(l)?`${l} </span><br><span>`:"",`${n} ${a.room}</span>`):a.place===o?`<a href="${a.url}" target="_blank">${remote_event_text}</a>`:`<span>${a.room}</span>`}},{data:"speaker_list",render:function(t,e,a){return display_slot_speakers(t,e,a)}},{data:"n_register",render:function(t,e,a){return display_n_register(t,e,a)}},{data:"attendances_status",render:function(t,e,a){let n="",r=0;return 1===a.attendances_value&&(a.can_update_event_slot||a.can_update_attendances)?(r=1,n=`<button class="btn btn-light btn-sm mr-4" name="edit" onclick="open_modal(${a.id}, ${r}, ${a.n_places}, ${a.allow_individual_registrations}, ${a.allow_group_registrations}, ${a.group_mode}, ${a.n_group_places}, ${a.is_past}, ${a.can_update_registrations}, ${a.place})" title="${attendances_text}">`+"<i class='fa fas fa-edit fa-2x'></i></button>"):-1!==a.attendances_value&&(n=`<button class="btn btn-light btn-sm mr-4" name="view" onclick="open_modal(${a.id}, ${r}, ${a.n_places}, ${a.allow_individual_registrations}, ${a.allow_group_registrations}, ${a.group_mode}, ${a.n_group_places})" title="${registered_text}">`+"<i class='fa fas fa-eye fa-2x centered-icon'></i></button>"),n+t}},{data:"additional_information",render:function(t){return display_additional_information(t)}},{data:"",render:function(t,e,a){return display_slot_restrictions(t,e,a)}},{data:"allow_group_registrations",render:function(t,e,a){return"display"===e?display_group_informations(a):"filter"===e||"sort"===e?set_group_filter(a,e):t}}],columnDefs:init_column_defs(),initComplete:function(){var t=this.api(),e=[2,4,5];e.forEach(function(e){var a=t.column(e),n=a.header().id,r=$(`#${n}`),l=`${n}_input`,i=$(r).text();$(r).html(i+`<div><input id="${l}" class="form-control form-control-sm" type="text" style="padding: 3px 4px 3px 4px"/></div>`),$(`#${l}`).click(function(t){t.stopPropagation()}),$(`#${l}`).off("keyup change").on("keyup change",function(a){a.stopPropagation(),$(this).attr("title",$(this).val());var n=this.selectionStart;t.column(e).search(""!==this.value?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",""!==this.value,""===this.value).draw(),$(this).focus()[0].setSelectionRange(n,n)})})}}),$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt);let t=[2,4,5];t.forEach(function(t){let e=dt.column(t),a=e.header().id,n=`${a}_input`;$(`#${n}`).val("")}),dt.columns().search("").draw()}),$("#filter_past_slots").click(function(){dt.ajax.reload()}),yadcf.init(dt,init_yadcf_filter()),dt.on("draw",function(){$('[data-toggle="tooltip"]').tooltip()})}