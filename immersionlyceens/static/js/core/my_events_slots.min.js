function init_column_defs(){let t=[{defaultContent:"",targets:"_all",className:"all"},{orderable:!1,targets:9}];return is_highschool_manager&&t.push({targets:[2],visible:!1,searchable:!1}),t}function init_yadcf_filter(){let t=[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1},{column_number:1,filter_default_label:"",filter_container_id:"establishment_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1},{column_number:3,filter_default_label:"",style_class:"form-control form-control-sm",filter_container_id:"event_filter",filter_reset_button_text:!1},{column_number:6,filter_type:"text",filter_default_label:"",style_class:"form-control form-control-sm",filter_container_id:"speaker_filter",filter_reset_button_text:!1},{column_number:8,filter_default_label:"",style_class:"form-control form-control-sm",filter_container_id:"attendances_filter",filter_reset_button_text:!1}];return is_highschool_manager||t.push({column_number:2,filter_default_label:"",filter_container_id:"structure_filter",style_class:"form-control form-control-sm",filter_reset_button_text:!1}),t}function init_datatable(){dt=$("#slots_list").DataTable({processing:!1,order:[[4,"asc"]],pageLength:15,lengthMenu:[[5,10,25,-1],[5,10,25,all_text]],serverSide:!1,responsive:!1,ajax:{url:"/api/slots",data:function(t){return t.past=$("#filter_past_slots").is(":checked"),t.visits=!1,t.events=!0,t},dataSrc:function(t){if(void 0!==t.data)return t.data}},searching:!0,language:{url:language_file},columns:[{data:"published",render:function(t){return t?yes_text:no_text}},{data:"establishment",render:function(t,e,a){return a.establishment?a.establishment.label:a.highschool?a.highschool.label:void 0}},{data:"structure.label"},{data:"event.label",render:function(t,e,a){let n=t+" ("+a.event.type+") ";return n+='<span style="padding-left:5px" data-toggle="tooltip" title="'+a.event.description+'"><i class="fa fas fa-info-circle fa-2x"></i></span>',n}},{data:"datetime",render:function(t,e,a){return"display"===e||"filter"===e?"<span>"+a.date+"</span><br><span>"+a.time.start+" - "+a.time.end+"</span>":t}},{data:"location",render:function(t,e,a){let n="";return a.face_to_face?(n+="<span>",t.campus&&(n+=t.campus+"</span><br><span>"),t.building&&(n+=t.building+"</span><br><span>"),n+a.room+"</span>"):remote_event_text}},{data:"speakers",render:function(t){let e="";return $.each(t,function(t,a){e+="<a href='mailto:"+a+"'>"+t+"</a><br>"}),e}},{data:"",render:function(t,e,a){let n=a.n_register,l=a.n_places;return element="<span>"+n+"/"+l+'</span><div class="progress">    <div       class="progress-bar"       role="progressbar"       aria-valuenow="'+n+'"       aria-valuemin="0"       aria-valuemax="'+l+'"       style="width: '+Math.round(n/l*100)+'%"></div></div>',element}},{data:"attendances_status",render:function(t,e,a){var n="";return 1==a.attendances_value?n='<button class="btn btn-light btn-sm mr-4" name="edit" onclick="open_modal('+a.id+","+a.attendances_value+","+a.n_places+')" title="'+attendances_text+"\"><i class='fa fas fa-edit fa-2x'></i></button>":-1!=a.attendances_value&&(n='<button class="btn btn-light btn-sm mr-4" name="view" onclick="open_modal('+a.id+","+a.attendances_value+","+a.n_places+')" title="'+registered_text+"\"><i class='fa fas fa-eye fa-2x'></i></button>"),n+t}},{data:"additional_information",render:function(t){return t?'<span data-toggle="tooltip" title="'+t+'"><i class="fa fas fa-info-circle fa-2x"></i></span>':""}}],columnDefs:init_column_defs()}),$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)}),$("#filter_past_slots").click(function(){dt.ajax.reload()}),yadcf.init(dt,init_yadcf_filter()),dt.on("draw",function(){$('[data-toggle="tooltip"]').tooltip()})}