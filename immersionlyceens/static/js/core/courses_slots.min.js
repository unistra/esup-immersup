function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data){return data["campus"]+"<br>"+data["building"]}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){console.log(type);console.log(data["campus"].normalize("NFD").replace(/\p{Diacritic}/gu,""));return data["campus"]+"<br>"+data["building"]}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});function unaccentFilterFunction(filterVal,columnVal){unaccent_filterVal=unaccent_filterVal.normalize("NFD").replace(/\p{Diacritic}/gu,"");unaccent_columnVal=unaccent_columnVal.normalize("NFD").replace(/\p{Diacritic}/gu,"");return unaccent_filterVal===unaccent_columnVal}yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false,filter_type:"custom_func",custom_func:unaccentFilterFunction},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});function unaccentFilterFunction(filterVal,columnVal){unaccent_filterVal=unaccent_filterVal.normalize("NFD").replace(/\p{Diacritic}/gu,"");unaccent_columnVal=unaccent_columnVal.normalize("NFD").replace(/\p{Diacritic}/gu,"");return unaccent_filterVal===unaccent_columnVal}yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false,filter_type:"custom_func",custom_func:unaccentFilterFunction},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false,filter_match_mode:""},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{event.preventDefault();console.log("hop")}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{console.log("hop")}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event)}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#yadcf-filter--slots_list-5")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event);let input=$("#yadcf-filter--slots_list-5").val();console.log(input);$("#yadcf-filter--slots_list-5").val(input.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#yadcf-filter--slots_list-5")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event);let input_value=$("#yadcf-filter--slots_list-5").val();console.log(input_value);$("#yadcf-filter--slots_list-5").val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#yadcf-filter--slots_list-5")).forEach(input=>input.addEventListener("keydown",event=>{event.preventDefault();console.log(event);let input_value=$("#yadcf-filter--slots_list-5").val();console.log(input_value);$("#yadcf-filter--slots_list-5").val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event);console.log(input);let input_value=$("#yadcf-filter--slots_list-5").val();console.log(input_value);$("#yadcf-filter--slots_list-5").val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{event.preventDefault();console.log(event);console.log(input);let input_value=$("#yadcf-filter--slots_list-5").val();console.log(input_value);$("#yadcf-filter--slots_list-5").val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event);console.log(input);let input_value=$("#yadcf-filter--slots_list-5").val();console.log(input_value);$("#yadcf-filter--slots_list-5").val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event);console.log(event.target);let input_value=event.target.val();console.log(input_value);event.target.val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event);console.log(event.target.id);let input_value=event.target.val();console.log(input_value);event.target.val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{console.log(event);console.log(event.target.id);let input_value=$("#"+event.target.id).val();console.log(input_value);$("#"+event.target.id).val(input_value.normalize("NFD").replace(/\p{Diacritic}/gu,""))}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}}});return this};$(document).priorityOn("keydown","#building_filter input",function(e){console.log(e);console.log(e.target.id)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){console.log(event);let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){let input_value=$("#"+event.target.id).val()+event.originalEvent.key;let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();console.log(input_value);let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){let input_value=$("#"+event.target.id).val()+event.originalEvent.key;console.log(input_value);let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keydown","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();console.log(input_value);let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keyup","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();console.log(input_value);let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keyup","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();console.log(input_value);let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$.fn.priorityOn=function(type,selector,data,fn){this.each(function(){var $this=$(this);var types=type.split(" ");console.log($this);console.log(types);for(var t in types){$this.on(types[t],selector,data,fn);var currentBindings=$._data(this,"events")[types[t]];console.log(currentBindings);if($.isArray(currentBindings)){currentBindings.unshift(currentBindings.pop())}console.log(currentBindings)}});return this};$(document).priorityOn("keyup","#building_filter input",function(event){let input_value=$("#"+event.target.id).val();console.log(input_value);let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"auto_complete",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"auto_complete",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"custom_func",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"custom_func",custom_func:function(filterVal,columnVal){return filterVal===columnVal},filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{event.preventDefault();let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value);event.preventDefault()}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value);event.stopPropagation()}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}));yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}function unAccent(event){let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",unAccent(event)))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}function unAccent(event){let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>unAccent(event)))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value);event.preventDefault();event.stopPropagation()}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keypress",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)}))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>{var keyups=input.data("events").keyup.slice();console.log(keyups);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>function(){var keyups=input.data("events").keyup.slice();console.log(keyups);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>function(){var keyups=input.data("events");console.log(keyups);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>function(){input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(function(input){input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(function(input){var keyups=input.data("events");console.log(keyups);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(function(input){console.log(input);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>function(input){console.log(input);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(function(input){console.log(input);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter > input")).forEach(function(input){console.log(input);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}let input=$("#building_filter :input");console.log(input.data("events"))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}let input=$("#building_filter :input");console.log(input)}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}let input=$("#building_filter :input");console.log(input[0].data("events"))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}let input=$("#building_filter :input");console.log(input.data("events"))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}let input=$("#building_filter :input");input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)});console.log(input.data("events"))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}let input=$("#building_filter :input");input.keydown(function(){let input_value=$(this).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$(this).val(updated_value)});console.log(input.data("events"))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}let input=$("#building_filter :input");input.keydown(function(){console.log($(this.val()));let input_value=$(this).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$(this).val(updated_value)});console.log(input.data("events"))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$("#building_filter :input").keydown(function(){console.log($(this.val()));let input_value=$(this).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$(this).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$("#building_filter :input").on("keydown",function(){console.log($(this.val()));let input_value=$(this).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$(this).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}$("#building_filter :input").on("keydown",function(event){console.log(event);console.log($(this.val()));let input_value=$(this).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$(this).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}console.log($("#building_filter :input"));$("#building_filter :input").on("keydown",function(event){console.log(event);console.log($(this.val()));let input_value=$(this).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$(this).val(updated_value)})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>{console.log(input);input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>{input.addEventListener("keydown",event=>{console.log(input.target.data("events"));let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>{input.addEventListener("keydown",event=>{console.log(event.target.data("events"));let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>{input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})});console.log($("#yadcf-filter-wrapper--slots_list-5").data("events"))}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}]});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}Array.from(document.querySelectorAll("#building_filter")).forEach(input=>{input.addEventListener("keydown",event=>{let input_value=$("#"+event.target.id).val();let updated_value=input_value.normalize("NFD").replace(/\p{Diacritic}/gu,"");console.log(updated_value);$("#"+event.target.id).val(updated_value)})})}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();console.log(api.columns().eq(0))}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();console.log(api.column())}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();console.log(api.column(5))}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();console.log(api.column(5).data())}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5).data();var cell=$(".filters th").eq($(column.header()).index());console.log(cell)}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);var cell=$(".filters th").eq($(column.header()).index());console.log(cell)}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:5,filter_type:"text",filter_default_label:"",filter_container_id:"building_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);var cell=$(".filters th").eq($(column.header()).index());console.log(cell)}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);var cell=$(".filters th").eq($(column.header()).index());var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);var cell=$(".filters th").eq($(column.header()).index());var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);var cell=$(".filters th").eq($(column.header()).index());console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5).eq(0);var cell=$(".filters th").eq($(column.header()).index());console.log(column);console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);var cell=$(".filters th").eq($(column.header()).index());console.log(column);console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column("5");var cell=$(".filters th").eq($(column.header()).index());console.log(column);console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.columns();var cell=$(".filters th").eq($(column.header()).index());console.log(column);console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.columns().eq(0);console.log(column);var cell=$(".filters th").eq($(column.header()).index());console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);console.log(column);var cell=$(".filters th").eq($(column.header()).index());console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);console.log(column.header());var cell=$(".filters th").eq($(column.header()).index());console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);console.log(column.header().index());var cell=$(".filters th").eq($(column.header()).index());console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var column=api.column(5);console.log($(column.header()).index());var cell=$(".filters th").eq($(column.header()).index());console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$(".filters th").eq(building_column_idx);console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$(".filters th").eq(building_column_idx);console.log($(".filters th"));console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$(".filters th").eq($(column.header()).index())).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?regexr.replace("{search}","((("+this.value+")))"):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();console.log(title);$(cell).html('<input type="text" placeholder="'+title+'" />');$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();$(cell).html(title+'<input type="text" placeholder="" />');$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();$(cell).html(title+'<div><input type="text" placeholder="" /></div>');$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" placeholder="" /></div>');$("#building_input_filter").onclick(function(event){event.stopPropagation()});$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);console.log($(column.header()).index());var cell=$("#building_filter");console.log(cell);var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" placeholder="" /></div>');console.log($("#building_input_filter"));$("#building_input_filter").onclick(function(event){event.stopPropagation()});$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);var cell=$("#building_filter");var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" placeholder="" /></div>');console.log($("#building_input_filter"));$("#building_input_filter").onclick(function(event){event.stopPropagation()});$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);var cell=$("#building_filter");var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" placeholder="" /></div>');console.log($("#building_input_filter"));$("#building_input_filter").click(function(event){event.stopPropagation()});$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var regexr="({search})";var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);var cell=$("#building_filter");var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" placeholder="" /></div>');$("#building_input_filter").click(function(event){event.stopPropagation()});$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);var cell=$("#building_filter");var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" onclick="stopPropagation()" placeholder="" /></div>');$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);var cell=$("#building_filter");var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" placeholder="" /></div>');$("#building_input_filter").click(function(event){event.stopPropagation()});$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
function init_datatable(){dt=$("#slots_list").DataTable({ajax:{url:"/api/slots",data:function(d){d.training_id=current_training_id||$("#id_training").val();if($("#id_structure").val()){d.structure_id=current_structure_id||$("#id_structure").val()}else if($("#id_highschool").val()){d.highschool_id=current_highschool_id||$("#id_highschool").val()}d.past=$("#filter_past_slots").is(":checked");return d},dataSrc:function(json){if(json["data"]!==undefined&&json["data"].length!==0){return json["data"]}return[]}},order:[[4,"asc"]],processing:false,serverSide:false,responsive:false,info:false,search:true,searchCols:[null,null,{search:course_label_filter},null,null,null,null,null,null,null],paging:true,ordering:true,language:{url:language_file},columns:[{data:"published",render:function(data,type,row){return data?yes_text:no_text}},{data:"structure",render:function(data,type,row){if(row.structure){return row.establishment.code+" - "+row.structure.code}else if(row.highschool){return row.highschool.city+" - "+row.highschool.label}return""}},{data:"course",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){return'<a href="/core/course/'+data.id+'">'+data.label+"</a>"}else{return data.label}}},{data:"course_type"},{data:"datetime",render:function(data,type,row){if(type==="display"||type==="filter"){return"<span>"+row.date+"</span><br><span>"+row.time["start"]+" - "+row.time["end"]+"</span>"}return data}},{data:"location",render:function(data,type,row){let txt=data["campus"]+"<br>"+data["building"];if(type==="filter"){return txt.normalize("NFD").replace(/\p{Diacritic}/gu,"")}return txt}},{data:"room"},{data:"speakers",render:function(data){let element="";$.each(data,function(name,email){element+='<a href="mailto:'+email+'">'+name+"</a><br>"});return element}},{data:"n_register",render:function(data,type,row){let current=data;let n=row["n_places"];element="<span>"+current+"/"+n+"</span>"+'<div class="progress">'+"    <div"+'       class="progress-bar"'+'       role="progressbar"'+'       aria-valuenow="'+current+'"'+'       aria-valuemin="0"'+'       aria-valuemax="'+n+'"'+'       style="width: '+Math.round(current/n*100)+'%"'+"></div>"+"</div>";return element}},{data:"additional_information",render:function(data){if(data){return'<span data-toggle="tooltip" title="'+data+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"restrictions",render:function(data){let txt="";if(data.establishment_restrictions===true){txt+=establishments_txt+" :\n";data.allowed_establishments.forEach(item=>{txt+="- "+item+"\n"});data.allowed_highschools.forEach(item=>{txt+="- "+item+"\n"})}if(data.levels_restrictions===true){if(txt)txt+="\n";txt+=levels_txt+" :\n";data.allowed_highschool_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_post_bachelor_levels.forEach(item=>{txt+="- "+item+"\n"});data.allowed_student_levels.forEach(item=>{txt+="- "+item+"\n"})}if(txt){return'<span data-toggle="tooltip" title="'+txt+'"><i class="fa fas fa-info-circle fa-2x centered-icon"></i></span>'}else{return""}}},{data:"id",render:function(data,type,row){if(row.structure&&row.structure.managed_by_me||row.highschool&&row.highschool.managed_by_me){let element='        <a href="/core/slot/'+data+'/1" class="btn btn-light btn-sm mr-1" '+'         title="'+duplicate_text+'"><i class="fa far fa-copy fa-2x centered-icon"></i></a>';if(row.is_past===false){element+='<a href="/core/slot/'+data+'" class="btn btn-light btn-sm mr-1" title="'+modify_text+'"><i class="fa fas fa-pencil fa-2x centered-icon"></i></a>\n'}if(row.n_register===0&&row.is_past===false){element+='<button class="btn btn-light btn-sm mr-1" onclick="deleteDialog.data(\'slot_id\', '+data+").dialog('open')\" title=\""+delete_text+'"><i class="fa fas fa-trash fa-2x centered-icon"></i></button>\n'}if(row.attendances_value===1){element+='<button class="btn btn-light btn-sm mr-1" name="edit" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+","+row.face_to_face+')" title="'+attendances_text+'">'+"<i class='fa fas fa-edit fa-2x centered-icon'></i>"+"</button>"}else if(row.attendances_value!==-1){element+='<button class="btn btn-light btn-sm mr-1" name="view" onclick="open_modal('+data+","+row.attendances_value+","+row.n_places+","+row.is_past+","+row.can_update_registrations+')" title="'+registered_text+'">'+"<i class='fa fas fa-eye fa-2x centered-icon'></i>"+"</button>"}element+="</div>";return element}else{return""}}}],columnDefs:[{defaultContent:"-",targets:"_all"}],initComplete:function(){var api=this.api();var building_column_idx=5;var column=api.column(building_column_idx);var cell=$("#building_filter");var title=$(cell).text();$(cell).html(title+'<div><input id="building_input_filter" type="text" placeholder="" /></div>');$("#building_input_filter").click(function(event){event.stopPropagation()});$("input",$("#building_filter")).off("keyup change").on("keyup change",function(e){e.stopPropagation();$(this).attr("title",$(this).val());var cursorPosition=this.selectionStart;api.column(5).search(this.value!==""?this.value.normalize("NFD").replace(/\p{Diacritic}/gu,""):"",this.value!=="",this.value==="").draw();$(this).focus()[0].setSelectionRange(cursorPosition,cursorPosition)})}});$("#filters_reset_all").click(function(){yadcf.exResetAllFilters(dt)});$("#filter_past_slots").click(function(){dt.ajax.reload()});yadcf.init(dt,[{column_number:0,filter_default_label:"",filter_container_id:"published_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:1,filter_default_label:"",filter_match_mode:"exact",style_class:"form-control form-control-sm",filter_container_id:"managed_by_filter",filter_reset_button_text:false},{column_number:2,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:3,filter_default_label:"",filter_match_mode:"exact",filter_container_id:"course_type_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:4,filter_type:"text",filter_default_label:"",filter_container_id:"date_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:6,filter_type:"text",filter_default_label:"",filter_container_id:"room_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:7,filter_type:"text",filter_default_label:"",filter_container_id:"speakers_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false},{column_number:8,filter_type:"text",filter_default_label:"",filter_container_id:"registration_filter",style_class:"form-control form-control-sm",filter_reset_button_text:false}]);if(course_label_filter){yadcf.exFilterColumn(dt,[[2,[course_label_filter]]])}}
