function getCookie(e){var t=null;if(document.cookie&&""!=document.cookie)for(var i=document.cookie.split(";"),l=0;l<i.length;l++){var a=django.jQuery.trim(i[l]);if(a.substring(0,e.length+1)==e+"="){t=decodeURIComponent(a.substring(e.length+1));break}}return t}window.addEventListener("load",function(){var e,t,i,l,a;e=django.jQuery,i=0,l=gettext("Results"),a=gettext("Select a user ..."),e(document).ready(function(){e("#id_username").after("<label id='livesearch_label'>"+l+" :</label><select id='live_select' style='visibility:hidden'></select><label id='ws_message' style='display:none; width:300px;'></label>"),e("#id_username").on("input",function(){if(this.value.length>=2){var l=getCookie("csrftoken");i+=1,e.ajax({beforeSend:function(e){e.setRequestHeader("X-CSRFToken",l)},url:"/api/get_person",type:"POST",data:{username:this.value,query_order:i},success:function(l){var n=l.msg,s=l.data[0];if(""!=n?(document.getElementById("ws_message").innerHTML=n,e("#ws_message").show()):(document.getElementById("ws_message").innerHTML="",e("#ws_message").hide()),s>=i)if(document.getElementById("livesearch_label").style.visibility="visible",document.getElementById("live_select").style.visibility="visible",l.data.length<=1)e("#id_email").val(""),e("#id_first_name").val(""),e("#id_last_name").val("");else{t=l.data,e("#live_select").empty().append("<option value=''>"+a+"</option>");for(var d=1;d<l.data.length;d++)e("#live_select").append("<option value='"+d+"'>"+l.data[d].display_name+"</option>")}},error:function(e){obj=JSON.stringify(e),console.log("Error : "+obj)}})}else document.getElementById("live_select").style.visibility="hidden",document.getElementById("livesearch_label").style.visibility="hidden",e("#id_email").val(""),e("#id_first_name").val(""),e("#id_last_name").val("")}),e("#live_select").on("change",function(i,l){e("option:selected",this);var a=this.value;""!=this.value?(e("#id_username").val(t[a].username),e("#id_email").val(t[a].email),e("#id_first_name").val(t[a].firstname),e("#id_last_name").val(t[a].lastname)):(e("#id_username").val(""),e("#id_email").val(""),e("#id_first_name").val(""),e("#id_last_name").val(""))})})});