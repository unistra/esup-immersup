{% extends 'base.html' %}
{% load static i18n immersionlyceens_tags %}
{% get_current_language as LANGUAGE_CODE %}

{% block content %}
{% information_text_get 'MENTIONS_INSCRIPTION' as mentions %}
{% general_settings_get 'ACTIVATE_VISITORS' as visitors_activated %}
<div class="main-title inside text-center">
    <div></div>
    <div class="container">
        <div class="row">
            <div class="col">
            {% if profile == "vis" %}
                <h1>{% trans 'Immersion Lycéens - New visitor account' %}</h1>
            {% else %}
                <h1>{% trans 'Immersion Lycéens - New high school student account' %}</h1>
            {% endif %}
            </div>
        </div>
    </div>
</div>
<section class="py-5">
    <div class="container">
      <h3>{% trans 'Please fill this form to create your account' %} :</h3>
      <form method="post">
        {% csrf_token %}

        {% if visitors_activated and profile == "vis" %}
          <input type="hidden" name="registration_type" value="vis">
        {% else %}
          <input type="hidden" name="registration_type" value="hs">
        {% endif %}

        <div class="form-group row justify-content-center">
            <label for="{{ form.last_name.id_for_label }}" class="col-sm-2 col-form-label">{% trans 'Last name' %} :</label>
            <div class="col-sm-9 col-md-6">
                <input type="text" id="{{ form.last_name.id_for_label }}" name="{{ form.last_name.html_name }}"
                {% if form.last_name.field.required %}required{% endif %} class="form-control{% if form.last_name.errors %} is-invalid{% endif %}"
                value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}">
                {% if form.last_name.help_text %}
                <small class="text-muted">
                {{ form.last_name.help_text }}
                </small>
                {% endif %}
                {% for err in form.last_name.errors %}
                <span class="invalid-feedback">{{ err }}</span>
                {% endfor %}
             </div>
        </div>
        <div class="form-group row justify-content-center">
            <label for="{{ form.first_name.id_for_label }}" class="col-sm-2 col-form-label">{% trans 'First name' %} :</label>
            <div class="col-sm-9 col-md-6">
                <input type="text" id="{{ form.first_name.id_for_label }}" name="{{ form.first_name.html_name }}"
                {% if form.first_name.field.required %}required{% endif %} class="form-control{% if form.first_name.errors %} is-invalid{% endif %}"
                value="{% if form.last_name.value %}{{ form.last_name.value }}{% endif %}">
                {% if form.first_name.help_text %}
                <small class="text-muted">
                {{ form.first_name.help_text }}
                </small>
                {% endif %}
                {% for err in form.first_name.errors %}
                <span class="invalid-feedback">{{ err }}</span>
                {% endfor %}
            </div>
        </div>
        <div class="form-group row justify-content-center">
            <label for="{{ form.email.id_for_label }}" class="col-sm-2 col-form-label">{% trans 'Email' %} :</label>
            <div class="col-sm-9 col-md-6">
                <input type="email" id="{{ form.email.id_for_label }}" name="{{ form.email.html_name }}"
                {% if form.email.field.required %}required{% endif %} class="form-control{% if form.email.errors %} is-invalid{% endif %}"
                value="{% if form.email.value %}{{ form.email.value }}{% endif %}">
                {% if form.email.help_text %}
                <small class="text-muted">
                {{ form.email.help_text }}
                </small>
                {% endif %}
                {% for err in form.email.errors %}
                <span class="invalid-feedback">{{ err }}</span>
                {% endfor %}
            </div>
        </div>
        <div class="form-group row justify-content-center">
            <label for="{{ form.email2.id_for_label }}" class="col-sm-2 col-form-label">{% trans 'Email (confirmation)' %} :</label>
            <div class="col-sm-9 col-md-6">
                <input type="email" id="{{ form.email2.id_for_label }}" name="{{ form.email2.html_name }}"
                {% if form.email2.field.required %}required{% endif %} class="form-control{% if form.email2.errors %} is-invalid{% endif %}"
                value="{% if form.email2.value %}{{ form.email2.value }}{% endif %}">
                {% if form.email2.help_text %}
                <small class="text-muted">
                {{ form.email2.help_text }}
                </small>
                {% endif %}
                {% for err in form.email2.errors %}
                <span class="invalid-feedback">{{ err }}</span>
                {% endfor %}
            </div>
        </div>
        {% if form.password1 %}
        <div class="form-group row justify-content-center">
            <label for="{{ form.password1.id_for_label }}" class="col-sm-2 col-form-label">{% trans 'Password' %} :</label>
            <div class="col-sm-9 col-md-6">
                <div class="input-group">
                    <input type="password" id="{{ form.password1.id_for_label }}" name="{{ form.password1.html_name }}"
                    {% if form.password1.field.required %}required{% endif %} class="form-control{% if form.password1.errors %} is-invalid{% endif %}"
                    value="{% if form.password1.value %}{{ form.password1.value }}{% endif %}">
                    <div class="input-group-append">
                        <button class="btn btn-secondary" id="view_button1" type="button">
                            <i class="fa fas fa-eye" ></i>
                        </button>
                    </div>
                </div>
                {% if form.password1.help_text %}
                <small class="text-muted">
                {{ form.password1.help_text }}
                </small>
                {% endif %}
                {% for err in form.password1.errors %}
                <span class="invalid-feedback">{{ err }}</span>
                {% endfor %}
            </div>
        </div>
        {% endif %}
        {% if form.password2 %}
        <div class="form-group row justify-content-center">
            <label for="{{ form.password2.id_for_label }}" class="col-sm-2 col-form-label">{% trans 'Password (confirmation)' %} :</label>
            <div class="col-sm-9 col-md-6">
                <div class="input-group">
                    <input type="password" id="{{ form.password2.id_for_label }}" name="{{ form.password2.html_name }}"
                    {% if form.password2.field.required %}required{% endif %} class="form-control{% if form.password2.errors %} is-invalid{% endif %}"
                    value="{% if form.password2.value %}{{ form.password2.value }}{% endif %}">
                    <div class="input-group-append">
                        <button class="btn btn-secondary" id="view_button2" type="button">
                            <i class="fa fas fa-eye" ></i>
                        </button>
                    </div>
                </div>
                {% if form.password2.help_text %}
                <small class="text-muted">
                {{ form.password2.help_text }}
                </small>
                {% endif %}
                {% for err in form.password2.errors %}
                <span class="invalid-feedback">{{ err }}</span>
                {% endfor %}
            </div>

        </div>
        {% endif %}
        <div class="form-group row justify-content-center">
          <div class="col-sm-10 col-md-8 alert alert-info">
            {{ mentions | safe }}
          </div>
        </div>
        <div class="form-group row justify-content-center">
          <div class="col-sm-9 col-md-6 offset-sm-3 offset-lg-2">
            <input type="submit" class="btn btn-primary" name="submit" value="{% trans 'Submit' %}">
            <a href="{% url 'immersion:login' %}" class="btn btn-outline-secondary">{% trans 'Back' %}</a>
          </div>
        </div>
      </form>
    </div>
  </section>
</div>
<script>
$(document).ready(function() {
    $("#view_button1").bind("mousedown touchstart", function() {
            $("#{{ form.password1.id_for_label }}").attr("type", "text");
        }), $("#view_button1").bind("mouseup touchend", function() {
            $("#{{ form.password1.id_for_label }}").attr("type", "password");
        }), $("#view_button2").bind("mousedown touchstart", function() {
            $("#{{ form.password2.id_for_label }}").attr("type", "text");
        }), $("#view_button2").bind("mouseup touchend", function() {
            $("#{{ form.password2.id_for_label }}").attr("type", "password")
        })
    });
</script>
{% endblock %}
